# Outputs Directory

**All final outputs consolidated in one place**

This directory contains all outputs generated by the hurricane data ETL pipeline:
- **ML-ready datasets** for analysis
- **Visualizations** for quality assurance and presentation
- **Reports** for summary statistics

---

## Directory Structure

```
06_outputs/
â”œâ”€â”€ ml_ready/          # Final ML-ready feature tables
â”œâ”€â”€ visuals/           # All visualizations (organized by data source)
â””â”€â”€ reports/           # Summary reports and statistics
```

---

## ðŸ“Š ML-Ready Datasets (`ml_ready/`)

Final feature tables ready for machine learning applications.

### Files

**Per-Storm Features:**
- `{storm_id}_features.csv` - Individual storm feature tables
  - Example: `al092021_features.csv` (Hurricane Ida)
  - Generated by: `03_integration/src/feature_pipeline.py`

**Unified Dataset:**
- `storm_tract_features.csv` - All storms combined
  - Generated by: `03_integration/scripts/batch_extract_features.py`
  - Contains: 14 Gulf Coast hurricanes (2005-2022)

### Feature Columns

Each CSV includes:
- **Tract Identifiers:** `geoid`, `state_fips`, `county_fips`, `tract_code`
- **Storm Info:** `storm_id`, `storm_name`, `year`
- **Distance Features:** `distance_to_track_km`, `min_distance_km`
- **Wind Features:** `max_wind_kt`, `wind_source`, `inside_eyewall`
- **Duration Features:** `duration_34kt_hours`, `duration_50kt_hours`, `duration_64kt_hours`
- **Lead Time Features:** `lead_time_cat{1-5}_hours`, `lead_time_cat{1-5}_distance_km`
- **Intensification Metrics:** `max_intensification_24h`, `max_weakening_24h`

### Usage

```python
import pandas as pd

# Load single storm
ida_features = pd.read_csv('06_outputs/ml_ready/al092021_features.csv')

# Load all storms
all_features = pd.read_csv('06_outputs/ml_ready/storm_tract_features.csv')
```

---

## ðŸ“ˆ Visualizations (`visuals/`)

Interactive maps and plots for quality assurance and presentation.

See [`visuals/README.md`](visuals/README.md) for detailed documentation.

### Quick Access

**Wind Field Maps:**
- `visuals/hurdat2/` - HURDAT2 wind radii visualizations
- Open in browser: `file:///.../06_outputs/visuals/hurdat2/IDA_2021_wind_field.html`

**QAQC Maps:**
- `visuals/hurdat2_census/` - Multi-source quality assurance maps
- Includes: distance, wind, duration, lead time visualizations

**Debug Plots:**
- `visuals/debug/` - Development and debugging visualizations

---

## ðŸ“‹ Reports (`reports/`)

Summary statistics and batch processing reports.

*Currently empty - reserved for future reports*

---

## How to Generate Outputs

### Extract Features for One Storm

```bash
# Using feature pipeline
python 03_integration/src/feature_pipeline.py AL092021

# Output: 06_outputs/ml_ready/al092021_features.csv
```

### Generate Wind Field Visualization

```bash
python 01_data_sources/hurdat2/src/visualize_folium_qa.py --storm-id AL092021

# Output: 06_outputs/visuals/hurdat2/IDA_2021_wind_field.html
```

### Batch Process All Storms

```bash
python 03_integration/scripts/batch_extract_features.py

# Outputs:
# - Per-storm CSVs in ml_ready/
# - Unified dataset: ml_ready/storm_tract_features.csv
```

---

## Output Locations by Script

| Script | Output Location | Description |
|--------|----------------|-------------|
| `feature_pipeline.py` | `ml_ready/{storm_id}_features.csv` | Single storm features |
| `batch_extract_features.py` | `ml_ready/storm_tract_features.csv` | All storms unified |
| `visualize_folium_qa.py` | `visuals/hurdat2/{storm}_{year}_wind_field.html` | Wind field map |
| `debug_distance_calculation.py` | `visuals/debug/debug_distance_plot.png` | Debug plot |

---

## File Naming Conventions

### ML-Ready Datasets
- **Format:** `{storm_id}_features.csv` (lowercase)
- **Example:** `al092021_features.csv`

### Visualizations
- **Format:** `{STORM_NAME}_{YEAR}_{type}.html` (uppercase name)
- **Examples:**
  - `IDA_2021_wind_field.html`
  - `qaqc_01_distance.html`
  - `qaqc_04_lead_time_cat3.html`

---

## Data Quality Notes

### Source Tracking

All features include source metadata:
- `wind_source` - Origin of wind estimate (rmw_plateau, decay, missing)
- `duration_source` - Origin of duration (observed, imputed, interpolated)
- `was_imputed` - Flag for imputed wind radii

### Quality Filters Applied

- Minimum duration threshold: 0.25 hours (15 minutes)
- Invalid geometries auto-repaired with `.buffer(0)`
- Tracts with all-missing wind radii excluded

---

## Storm Coverage

**14 Gulf Coast Hurricanes (2005-2022):**
- 2005: Katrina, Rita, Dennis
- 2008: Gustav, Ike
- 2017: Harvey, Irma
- 2018: Michael
- 2020: Laura, Delta, Zeta, Sally
- 2021: Ida
- 2022: Ian

**Geographic Extent:**
- States: LA, MS, TX, AL, FL
- Census tracts within storm impact area (3Â° margin)

---

## Related Documentation

- **Methodology:** [`00_documentation/FEATURE_METHODOLOGY.md`](../00_documentation/FEATURE_METHODOLOGY.md)
- **Repository Structure:** [`00_documentation/REPOSITORY_STRUCTURE.md`](../00_documentation/REPOSITORY_STRUCTURE.md)
- **Visualization Guide:** [`visuals/README.md`](visuals/README.md)

---

**Need help?** Check the main project documentation in `00_documentation/`
