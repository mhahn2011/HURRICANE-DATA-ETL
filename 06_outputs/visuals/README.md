# Visualizations Directory

**Interactive maps and plots for quality assurance and presentation**

All visualizations are organized by data source to make it easy to find what you need.

---

## Directory Structure

```
visuals/
‚îú‚îÄ‚îÄ hurdat2/              # Single-source HURDAT2 visualizations
‚îÇ   ‚îî‚îÄ‚îÄ {STORM}_{YEAR}_wind_field.html
‚îÇ
‚îú‚îÄ‚îÄ hurdat2_census/       # Multi-source QAQC maps
‚îÇ   ‚îú‚îÄ‚îÄ ida_interactive_map.html
‚îÇ   ‚îú‚îÄ‚îÄ qaqc_01_distance.html
‚îÇ   ‚îú‚îÄ‚îÄ qaqc_02_wind.html
‚îÇ   ‚îú‚îÄ‚îÄ qaqc_03_duration.html
‚îÇ   ‚îú‚îÄ‚îÄ qaqc_04_lead_time_cat{1-5}.html
‚îÇ   ‚îî‚îÄ‚îÄ qaqc_wind_radii_map.html
‚îÇ
‚îî‚îÄ‚îÄ debug/                # Debug and development plots
    ‚îú‚îÄ‚îÄ debug_distance_plot.png
    ‚îî‚îÄ‚îÄ ida_static_map.png
```

---

## üåÄ HURDAT2 Wind Field Maps (`hurdat2/`)

**Arc-based wind radii visualizations using Folium**

### Available Maps

- `IDA_2021_wind_field.html` - Hurricane Ida wind field

### Features

‚úÖ **Interactive Folium Maps:**
- Arc-based wind radii (30 points per quadrant)
- Multiple wind thresholds (34kt, 50kt, 64kt)
- Radius of Maximum Wind (RMW) circles
- Track points color-coded by intensity
- Popup details on click

‚úÖ **Wind Field Layers:**
- **34kt (Tropical Storm)** - Yellow, 30% opacity
- **50kt (Strong TS)** - Orange, 40% opacity
- **64kt (Hurricane)** - Red, 50% opacity
- **RMW** - Purple, 20% opacity

‚úÖ **Track Point Colors:**
- üîµ Blue - Tropical Depression
- üü¢ Green - Tropical Storm
- üü° Yellow - Cat 1-2 (‚â•64 kt)
- üü† Orange - Cat 3 (‚â•96 kt)
- üî¥ Red - Cat 4 (‚â•113 kt)
- üî¥ Dark Red - Cat 5 (‚â•137 kt)

### How to Generate

```bash
python 01_data_sources/hurdat2/src/visualize_folium_qa.py --storm-id AL092021
```

### How to View

```bash
# Open in default browser
open hurdat2/IDA_2021_wind_field.html
```

---

## üìä HURDAT2-Census QAQC Maps (`hurdat2_census/`)

**Quality assurance visualizations for multi-source features**

### Available Visualizations

#### Distance Features
- **`qaqc_01_distance.html`** - Distance from tract to storm track
  - Shows: Minimum distance, closest approach time
  - Color scale: Distance in km
  - Useful for: Validating proximity calculations

#### Wind Features
- **`qaqc_02_wind.html`** - Maximum wind speed at tract centroid
  - Shows: Interpolated wind speed, eyewall flag
  - Color scale: Wind speed in knots
  - Useful for: Checking wind interpolation accuracy

#### Duration Features
- **`qaqc_03_duration.html`** - Hours of exposure to wind thresholds
  - Shows: Duration of 34kt, 50kt, 64kt winds
  - Color scale: Hours of exposure
  - Useful for: Validating temporal interpolation

#### Lead Time Features
- **`qaqc_04_lead_time_cat1.html`** - Category 1 (64kt) warning time
- **`qaqc_04_lead_time_cat2.html`** - Category 2 (83kt) warning time
- **`qaqc_04_lead_time_cat3.html`** - Category 3 (96kt) warning time
- **`qaqc_04_lead_time_cat4.html`** - Category 4 (113kt) warning time
- **`qaqc_04_lead_time_cat5.html`** - Category 5 (137kt) warning time
  - Shows: Hours of warning before threshold reached
  - Color scale: Lead time in hours
  - Useful for: Emergency planning analysis

#### Wind Radii Coverage
- **`qaqc_wind_radii_map.html`** ‚≠ê **Popular!**
  - Shows: Arc-based wind field polygons over time
  - Layers: Track, wind extent, census tracts
  - Useful for: Visual validation of coverage envelope

#### Interactive Overview
- **`ida_interactive_map.html`** - Comprehensive Ida visualization
  - Shows: All features combined
  - Interactive layer control
  - Useful for: Exploratory analysis

### Legacy QAQC Maps

These maps were generated by legacy scripts and are preserved for reference. They provide comprehensive quality checks across all feature types.

**Note:** These visualizations use the older implementation. New visualizations should be generated using updated scripts in the numbered folder structure.

---

## üêõ Debug Visualizations (`debug/`)

**Development and troubleshooting plots**

### Available Plots

- **`debug_distance_plot.png`** - Distance calculation diagnostic
  - Shows: Tract centroid, storm track, calculated distance
  - Useful for: Debugging distance calculations

- **`ida_static_map.png`** - Static map of Ida track
  - Shows: Storm track with wind radii
  - Useful for: Quick visual reference

### How to Generate Debug Plots

```bash
python 03_integration/src/debug_distance_calculation.py
```

---

## Visualization Technology Stack

### Interactive Maps (HTML)
- **Folium** - Python library for Leaflet.js maps
- **CartoDB Positron** - Clean base map tiles
- **GeoJSON** - Vector data format

### Static Plots (PNG)
- **Matplotlib** - Python plotting library
- **GeoPandas** - Spatial data visualization

---

## Color Scales

### Distance Maps
- **Blue ‚Üí Red:** 0 km (blue) to max distance (red)
- Diverging scale for visual clarity

### Wind Speed Maps
- **Yellow ‚Üí Orange ‚Üí Red:** Low to high wind speeds
- Matches Saffir-Simpson color conventions

### Duration Maps
- **Light ‚Üí Dark:** Short to long exposure
- Sequential scale for time-based features

### Lead Time Maps
- **Green ‚Üí Yellow ‚Üí Red:** High to low warning time
- Diverging scale for emergency planning

---

## File Naming Conventions

### Wind Field Maps
- **Format:** `{STORM_NAME}_{YEAR}_wind_field.html`
- **Example:** `IDA_2021_wind_field.html`

### QAQC Maps
- **Format:** `qaqc_{NN}_{feature_name}.html`
- **Examples:**
  - `qaqc_01_distance.html`
  - `qaqc_04_lead_time_cat3.html`

### Debug Plots
- **Format:** `debug_{description}.png`
- **Example:** `debug_distance_plot.png`

---

## Map Features

### Interactive Controls

All HTML maps include:
- ‚úÖ **Layer Toggle** - Show/hide data layers
- ‚úÖ **Zoom Controls** - Interactive zoom and pan
- ‚úÖ **Popups** - Click for detailed information
- ‚úÖ **Custom Legends** - Color scale explanations
- ‚úÖ **Tooltips** - Hover for quick info

### Cartographic Elements

- **Projection:** EPSG:4326 (WGS84)
- **Base Map:** CartoDB Positron (clean, minimal)
- **Symbology:** Graduated colors, proportional symbols
- **Labels:** Storm names, intensity values

---

## Viewing Recommendations

### For Presentations
‚Üí Use `hurdat2/` wind field maps (clean, professional)

### For Quality Assurance
‚Üí Use `hurdat2_census/` QAQC maps (detailed feature validation)

### For Debugging
‚Üí Use `debug/` plots (diagnostic information)

### For Analysis
‚Üí Use `hurdat2_census/ida_interactive_map.html` (all features combined)

---

## Known Limitations

### Map Performance
- Large datasets may load slowly in browser
- Recommend Chrome or Firefox for best performance

### Geographic Coverage
- Maps limited to Gulf Coast region (LA, MS, TX, AL, FL)
- Extent determined by 3¬∞ margin around storm track

### Temporal Resolution
- Wind radii shown at 6-hour intervals (HURDAT2 frequency)
- Intermediate positions interpolated linearly

---

## How to Create New Visualizations

### 1. Wind Field Map (Single Storm)

```bash
python 01_data_sources/hurdat2/src/visualize_folium_qa.py \
  --storm-id AL092021 \
  --output 06_outputs/visuals/hurdat2/IDA_2021_wind_field.html
```

### 2. Custom QAQC Map

See legacy scripts in `_legacy_data_sources/hurdat2_census/src/` for examples:
- `qaqc_comprehensive_suite.py` - All QAQC maps
- `qaqc_lead_time_visualization.py` - Lead time specific
- `qaqc_wind_radii_visualization.py` - Wind radii specific

**Note:** These scripts need to be updated to use the new numbered folder structure.

### 3. Debug Plot

```bash
python 03_integration/src/debug_distance_calculation.py
```

---

## Validation Checklist

When reviewing visualizations, check:

- [ ] **Spatial Accuracy:** Wind radii align with NOAA advisories
- [ ] **Temporal Progression:** Storm track follows expected path
- [ ] **Feature Consistency:** Values match CSV outputs
- [ ] **Visual Clarity:** Colors and symbols are distinguishable
- [ ] **Legend Completeness:** All layers explained

---

## Related Documentation

- **Feature Methodology:** [`00_documentation/FEATURE_METHODOLOGY.md`](../../00_documentation/FEATURE_METHODOLOGY.md)
- **Output Guide:** [`06_outputs/README.md`](../README.md)
- **Repository Structure:** [`00_documentation/REPOSITORY_STRUCTURE.md`](../../00_documentation/REPOSITORY_STRUCTURE.md)

---

**Pro Tip:** The wind radii map (`hurdat2_census/qaqc_wind_radii_map.html`) is great for understanding how the arc-based geometry captures wind field extent!
